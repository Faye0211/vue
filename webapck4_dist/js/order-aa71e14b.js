(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{221:function(t,e,r){"use strict";r.r(e);var s=r(304),a=r(243);for(var i in a)"default"!==i&&function(t){r.d(e,t,function(){return a[t]})}(i);var o=r(75),l=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);l.options.__file="src\\components\\order\\order.vue",e.default=l.exports},243:function(t,e,r){"use strict";r.r(e);var s=r(244),a=r.n(s);for(var i in s)"default"!==i&&function(t){r.d(e,t,function(){return s[t]})}(i);e.default=a.a},244:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){return t&&t.__esModule?t:{default:t}}(r(217)),a=r(77),i=r(78);e.default={components:{VDistpicker:s.default},data:function(){return{goodsList:[],totalCount:0,totalPrice:0,orderForm:{accept_name:"陈华",area:{province:{code:44e4,value:"广东省"},city:{code:440300,value:"深圳市"},area:{code:440306,value:"宝安区"}},address:"中粮商务公园",mobile:"13838389438",email:"chenhuasvip@163.com",post_code:"350011",payment_id:"6",express_id:"1",expressMoment:20,message:"请快点发货",goodsAmount:0},rules:{accept_name:[{required:!0,message:"请输入收货人姓名",trigger:"blur"}],area:[{required:!0,message:"请输入所属地区",trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],mobile:[{required:!0,validator:function(t,e,r){if(!e)return r(new Error("请输入手机号码"));/^[1][3,4,5,6,7,8][0-9]{9}$/.test(e)?r():r(new Error("手机号不正确"))},trigger:"blur"}]}}},created:function(){this.getGoodsListData()},computed:{getTotalAmount:function(){return this.totalPrice+this.orderForm.expressMoment}},methods:{onSelected:function(t){this.orderForm.area=t},expressChange:function(t){switch(t){case"1":this.orderForm.expressMoment=20;break;case"2":this.orderForm.expressMoment=10;break;case"3":this.orderForm.expressMoment=8}},getGoodsListData:function(){var t=this,e="site/validate/order/getgoodslist/"+this.$route.query.ids;this.orderForm.goodsids=this.$route.query.ids;var r=(0,a.getLocalGoods)(),s={};this.$axios.get(e).then(function(e){var a=0,i=0;e.data.message.forEach(function(t){t.buycount=r[t.id],s[t.id]=t.buycount,a+=t.buycount,i+=t.buycount*t.sell_price}),t.totalCount=a,t.totalPrice=i,t.orderForm.goodsAmount=i,t.orderForm.cargoodsobj=s,t.goodsList=e.data.message})},goToOrder:function(){var t=this;this.$refs.orderForm.validate(function(e){if(e){t.$axios.post("site/validate/order/setorder",t.orderForm).then(function(e){0===e.data.status?(t.$router.push({path:"pay",query:{orderId:e.data.message.orderid}}),t.$route.query.ids.split(",").forEach(function(e){t.$store.commit(i.DELETEGOODSBYID,e)})):t.$message.error(e.data.message)})}else t.$message.error("检查信息是否填写完整!")})}}}},304:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),t._v(" "),r("div",{staticClass:"section"},[r("div",{staticClass:"wrapper"},[r("div",{staticClass:"bg-wrap"},[t._m(1),t._v(" "),r("div",{staticClass:"cart-box"},[t._m(2),t._v(" "),r("div",{attrs:{id:"orderForm",name:"orderForm",url:""}},[r("div",{staticClass:"form-box address-info"},[r("el-form",{ref:"orderForm",staticClass:"demo-ruleForm",attrs:{model:t.orderForm,rules:t.rules,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"收货人姓名：",prop:"accept_name"}},[r("el-input",{staticStyle:{width:"500px"},model:{value:t.orderForm.accept_name,callback:function(e){t.$set(t.orderForm,"accept_name",e)},expression:"orderForm.accept_name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"所属地区：",prop:"area"}},[r("v-distpicker",{attrs:{province:t.orderForm.area.province.value,city:t.orderForm.area.city.value,area:t.orderForm.area.area.value},on:{selected:t.onSelected}})],1),t._v(" "),r("el-form-item",{attrs:{label:"详细地址：",prop:"address"}},[r("el-input",{staticStyle:{width:"500px"},model:{value:t.orderForm.address,callback:function(e){t.$set(t.orderForm,"address",e)},expression:"orderForm.address"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"手机号码：",prop:"mobile"}},[r("el-input",{staticStyle:{width:"500px"},model:{value:t.orderForm.mobile,callback:function(e){t.$set(t.orderForm,"mobile",e)},expression:"orderForm.mobile"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"电子邮箱："}},[r("el-input",{staticStyle:{width:"500px"},model:{value:t.orderForm.email,callback:function(e){t.$set(t.orderForm,"email",e)},expression:"orderForm.email"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"邮政编码："}},[r("el-input",{staticStyle:{width:"250px"},model:{value:t.orderForm.post_code,callback:function(e){t.$set(t.orderForm,"post_code",e)},expression:"orderForm.post_code"}})],1)],1)],1),t._v(" "),t._m(3),t._v(" "),r("ul",{staticClass:"item-box clearfix"},[r("li",[r("label",[r("el-radio",{attrs:{label:"6"},model:{value:t.orderForm.payment_id,callback:function(e){t.$set(t.orderForm,"payment_id",e)},expression:"orderForm.payment_id"}},[t._v("在线支付")]),t._v(" "),r("em",[t._v("手续费：0.00元")])],1)])]),t._v(" "),t._m(4),t._v(" "),r("ul",{staticClass:"item-box clearfix"},[r("li",[r("el-radio-group",{on:{change:t.expressChange},model:{value:t.orderForm.express_id,callback:function(e){t.$set(t.orderForm,"express_id",e)},expression:"orderForm.express_id"}},[r("el-radio",{attrs:{label:"1"}},[t._v("顺丰快递\n                                        "),r("em",[t._v("费用：20.00元 ")])]),t._v(" "),r("el-radio",{attrs:{label:"2"}},[t._v("圆通快递\n                                        "),r("em",[t._v("费用：10.00元")])]),t._v(" "),r("el-radio",{attrs:{label:"3"}},[t._v("韵达快递\n                                        "),r("em",[t._v("费用：8.00元")])])],1)],1)]),t._v(" "),t._m(5),t._v(" "),r("div",{staticClass:"line15"}),t._v(" "),r("table",{staticClass:"cart-table",attrs:{width:"100%",border:"0",align:"center",cellpadding:"8",cellspacing:"0"}},[r("tbody",[t._m(6),t._v(" "),t._l(t.goodsList,function(e){return r("tr",{key:e.id},[r("td",{attrs:{width:"68"}},[r("a",{attrs:{target:"_blank",href:"/goods/show-89.html"}},[r("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.img_url}})])]),t._v(" "),r("td",[r("a",{attrs:{target:"_blank",href:"/goods/show-89.html"}},[t._v(t._s(e.title))])]),t._v(" "),r("td",[r("span",{staticClass:"red"},[t._v("\n                                            ￥"+t._s(e.sell_price)+"\n                                        ")])]),t._v(" "),r("td",{attrs:{align:"center"}},[t._v(t._s(e.buycount))]),t._v(" "),r("td",[r("span",{staticClass:"red"},[t._v("\n                                            ￥"+t._s(e.sell_price*e.buycount)+"\n                                        ")])])])})],2)]),t._v(" "),r("div",{staticClass:"line15"}),t._v(" "),t._m(7),t._v(" "),r("div",{staticClass:"buy-foot clearfix"},[r("div",{staticClass:"left-box"},[r("dl",[r("dt",[t._v("订单备注(100字符以内)")]),t._v(" "),r("dd",[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.orderForm.message,expression:"orderForm.message"}],staticClass:"input",staticStyle:{height:"35px"},attrs:{name:"message"},domProps:{value:t.orderForm.message},on:{input:function(e){e.target.composing||t.$set(t.orderForm,"message",e.target.value)}}})])])]),t._v(" "),r("div",{staticClass:"right-box"},[r("p",[t._v("\n                                    商品\n                                    "),r("label",{staticClass:"price"},[t._v(t._s(t.totalCount))]),t._v(" 件     商品金额：￥\n                                    "),r("label",{staticClass:"price",attrs:{id:"goodsAmount"}},[t._v(t._s(t.totalPrice))]),t._v(" 元    \n                                ")]),t._v(" "),r("p",[t._v("\n                                    运费：￥\n                                    "),r("label",{staticClass:"price",attrs:{id:"expressFee"}},[t._v(t._s(t.orderForm.expressMoment))]),t._v(" 元\n                                ")]),t._v(" "),r("p",{staticClass:"txt-box"},[t._v("\n                                    应付总金额：￥\n                                    "),r("label",{staticClass:"price",attrs:{id:"totalAmount"}},[t._v(t._s(t.getTotalAmount))])]),t._v(" "),r("p",{staticClass:"btn-box"},[r("a",{staticClass:"btn button",on:{click:function(e){t.$router.push("shopcart")}}},[t._v("返回购物车")]),t._v(" "),r("a",{staticClass:"btn submit",attrs:{id:"btnSubmit"},on:{click:t.goToOrder}},[t._v("确认提交")])])])])])])])])])])},a=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"section"},[e("div",{staticClass:"location"},[e("span",[this._v("当前位置：")]),this._v(" "),e("a",{attrs:{href:"/index.html"}},[this._v("首页")]),this._v(" >\n            "),e("a",{attrs:{href:"/cart.html"}},[this._v("购物车")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cart-head clearfix"},[r("h2",[r("i",{staticClass:"iconfont icon-cart"}),t._v("我的购物车")]),t._v(" "),r("div",{staticClass:"cart-setp"},[r("ul",[r("li",{staticClass:"first active"},[r("div",{staticClass:"progress"},[r("span",[t._v("1")]),t._v("\n                                    放进购物车\n                                ")])]),t._v(" "),r("li",{staticClass:"active"},[r("div",{staticClass:"progress"},[r("span",[t._v("2")]),t._v("\n                                    填写订单信息\n                                ")])]),t._v(" "),r("li",{staticClass:"last"},[r("div",{staticClass:"progress"},[r("span",[t._v("3")]),t._v("\n                                    支付/确认订单\n                                ")])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"slide-tit"},[e("span",[this._v("1、收货地址")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"slide-tit"},[e("span",[this._v("2、支付方式")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"slide-tit"},[e("span",[this._v("3、配送方式")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"slide-tit"},[e("span",[this._v("4、商品清单")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",{attrs:{colspan:"2",align:"left"}},[this._v("商品信息")]),this._v(" "),e("th",{attrs:{width:"84",align:"left"}},[this._v("单价")]),this._v(" "),e("th",{attrs:{width:"84",align:"center"}},[this._v("购买数量")]),this._v(" "),e("th",{attrs:{width:"104",align:"left"}},[this._v("金额(元)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"slide-tit"},[e("span",[this._v("5、结算信息")])])}];s._withStripped=!0,r.d(e,"a",function(){return s}),r.d(e,"b",function(){return a})}}]);