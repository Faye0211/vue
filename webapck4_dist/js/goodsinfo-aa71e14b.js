(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{220:function(t,i,e){"use strict";e.r(i);var s=e(302),o=e(238);for(var n in o)"default"!==n&&function(t){e.d(i,t,function(){return o[t]})}(n);e(293);var a=e(75),r=Object(a.a)(o.default,s.a,s.b,!1,null,"fe9c63aa",null);r.options.__file="src\\components\\goods\\goodsinfo.vue",i.default=r.exports},238:function(t,i,e){"use strict";e.r(i);var s=e(239),o=e.n(s);for(var n in s)"default"!==n&&function(t){e.d(i,t,function(){return s[t]})}(n);i.default=o.a},239:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0});var s=r(e(4)),o=r(e(289));e(292);var n=e(78),a=e(37);function r(t){return t&&t.__esModule?t:{default:t}}i.default={data:function(){return{goods:{},count:1,isShowIntroduction:!0,pageIndex:1,pageSize:2,commentInfo:{},addToShopCartOffset:null,shoppingCartCountOffset:null,isShow:!1}},components:{Affix:o.default},watch:{$route:function(t){this.getGoodsData(),this.getCommentListData()}},created:function(){this.getGoodsData(),this.getCommentListData()},updated:function(){t("#magnifier1").imgzoon({magnifier:"#magnifier1"})},methods:(0,s.default)({getGoodsData:function(){var i=this,e="site/goods/getgoodsinfo/"+this.$route.params.goodsId;this.$axios.get(e).then(function(e){i.goods=e.data.message,setTimeout(function(){i.addToShopCartOffset=t(i.$refs.addToShopCartRef).offset(),t(i.$refs.animateRef).css(i.addToShopCartOffset),i.shoppingCartCountOffset=t("#shoppingCartCount").offset()},200)})},getCommentListData:function(){var t=this,i="site/comment/getbypage/goods/"+this.$route.params.goodsId+"?pageIndex="+this.pageIndex+"&pageSize="+this.pageSize;this.$axios.get(i).then(function(i){t.commentInfo=i.data})},handleSizeChange:function(t){this.pageSize=t,this.pageIndex=1,this.getCommentListData()},handleCurrentChange:function(t){this.pageIndex=t,this.getCommentListData()},postComment:function(){var t=this,i=this.$refs.textAreaRef.value;if(0!==i.trim().length){var e="site/validate/comment/post/goods/"+this.$route.params.goodsId;this.$axios.post(e,{commenttxt:i}).then(function(i){t.$message({message:"评论成功!",type:"success"}),t.$refs.textAreaRef.value="",t.pageIndex=1,t.getCommentListData()})}else this.$message({message:"请填写评论内容!",type:"warning"})}},(0,a.mapMutations)([n.ADD_GOODS]),{addToShopCart:function(){this.isShow=!0;var t={goodsId:this.$route.params.goodsId,count:this.count};this.ADD_GOODS(t)},beforeEnter:function(t){t.style.top=this.addToShopCartOffset.top+"px",t.style.left=this.addToShopCartOffset.left+"px",t.style.transform="scale(1)"},enter:function(t,i){t.style.transition="all .6s",t.offsetWidth,t.style.top=this.shoppingCartCountOffset.top+"px",t.style.left=this.shoppingCartCountOffset.left+"px",t.style.transform="scale(0.5)",i()},afterEnter:function(t){this.isShow=!1}})}}).call(this,e(97))},240:function(t,i,e){"use strict";var s=e(241),o=e.n(s);i.default=o.a},241:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(t){return t&&t.__esModule?t:{default:t}}(e(106)),o=e(291);function n(t,i){var e=i?"scrollTop":"scrollLeft",s=t[i?"pageYOffset":"pageXOffset"];return"number"!=typeof s&&(s=window.document.documentElement[e]),s}i.default={name:"Affix",props:{offsetTop:{type:Number,default:0},offsetBottom:{type:Number}},data:function(){return{affix:!1,styles:{},slot:!1,slotStyle:{}}},computed:{offsetType:function(){var t="top";return this.offsetBottom>=0&&(t="bottom"),t},classes:function(){return[(0,s.default)({},"ivu-affix",this.affix)]}},mounted:function(){(0,o.on)(window,"scroll",this.handleScroll),(0,o.on)(window,"resize",this.handleScroll)},beforeDestroy:function(){(0,o.off)(window,"scroll",this.handleScroll),(0,o.off)(window,"resize",this.handleScroll)},methods:{handleScroll:function(){var t=this.affix,i=n(window,!0),e=function(t){var i=t.getBoundingClientRect(),e=n(window,!0),s=n(window),o=window.document.body,a=o.clientTop||0,r=o.clientLeft||0;return{top:i.top+e-a,left:i.left+s-r}}(this.$el),s=window.innerHeight,o=this.$el.getElementsByTagName("div")[0].offsetHeight;e.top-this.offsetTop<i&&"top"==this.offsetType&&!t?(this.affix=!0,this.slotStyle={width:this.$refs.point.clientWidth+"px",height:this.$refs.point.clientHeight+"px"},this.slot=!0,this.styles={top:this.offsetTop+"px",left:e.left+"px",width:this.$el.offsetWidth+"px"},this.$emit("on-change",!0)):e.top-this.offsetTop>i&&"top"==this.offsetType&&t&&(this.slot=!1,this.slotStyle={},this.affix=!1,this.styles=null,this.$emit("on-change",!1)),e.top+this.offsetBottom+o>i+s&&"bottom"==this.offsetType&&!t?(this.affix=!0,this.styles={bottom:this.offsetBottom+"px",left:e.left+"px",width:this.$el.offsetWidth+"px"},this.$emit("on-change",!0)):e.top+this.offsetBottom+o<i+s&&"bottom"==this.offsetType&&t&&(this.affix=!1,this.styles=null,this.$emit("on-change",!1))}}}},242:function(t,i,e){},289:function(t,i,e){"use strict";e.r(i);var s=e(290);i.default=s.default},290:function(t,i,e){"use strict";var s=e(301),o=e(240),n=e(75),a=Object(n.a)(o.default,s.a,s.b,!1,null,null,null);a.options.__file="node_modules\\_iview@2.14.3@iview\\src\\components\\affix\\affix.vue",i.default=a.exports},291:function(t,i,e){"use strict";e.r(i),e.d(i,"on",function(){return o}),e.d(i,"off",function(){return n});const s=e(1).default.prototype.$isServer,o=!s&&document.addEventListener?function(t,i,e){t&&i&&e&&t.addEventListener(i,e,!1)}:function(t,i,e){t&&i&&e&&t.attachEvent("on"+i,e)},n=!s&&document.removeEventListener?function(t,i,e){t&&i&&t.removeEventListener(i,e,!1)}:function(t,i,e){t&&i&&t.detachEvent("on"+i,e)}},292:function(t,i,e){"use strict";(function(t){var i=function(t){return t&&t.__esModule?t:{default:t}}(e(2));!function(t){var e={magnifier:".magnifier",container:".magnifier-container",containerImg:".images-cover",view:".magnifier-view",width:368,height:368,moveView:".move-view",moveWidth:null,zoom:3,thumbnail:".magnifier-line > ul",assembly:".magnifier-btn",index:0};t.fn.imgzoon=function(s){if("object"==(void 0===s?"undefined":(0,i.default)(s)))for(var o in s)e[o]=s[o];var n={};n.magnifier=t(e.magnifier),n.container=n.magnifier.find(e.container),n.view=n.magnifier.find(e.view),n.moveView=n.magnifier.find(e.moveView),n.thumbnail=n.magnifier.find(e.thumbnail),n.assembly=n.magnifier.find(e.assembly),n.containerImg=n.magnifier.find(e.containerImg);var a,r,d,c,l,f,h,u,m,v=n.containerImg;n.magnifier.css({width:e.width}),n.container.css({width:e.width,height:e.height}),n.view.css({width:e.width,height:e.height}),a=e.moveWidth?e.moveWidth:e.width/e.zoom,r=a,n.moveView.css({width:a,height:r}),n.eqImg=function(){var t=new Image,i=n.thumbnail.find("img").eq(e.index).attr("src");t.src=i;e.width,e.height;n.thumbnail.find(">*").removeClass("active").eq(e.index).addClass("active"),function s(){0==t.width&&(t.onload=s),t.width>t.height?(h=e.width,u=t.height/(t.width/e.width)):(h=t.width/(t.height/e.width),u=e.width),v.empty().append('<img src="'+i+'" width="'+h+'" height="'+u+'" style="'+void 0+'" />'),m=e.width/a,n.view.empty().append('<img src="'+i+'" width="'+h*m+'" height="'+u*m+'" />'),d=(e.width-h)/2,c=e.width-d-a+1,l=(e.height-u)/2,f=e.height-l-r+1}()},n.eqImg(),n.moveFn=function(i){var s=i.clientX-n.magnifier.offset().left-a/2,o=i.clientY-n.magnifier.offset().top+t(document).scrollTop()-r/2,v=s>d?s<c?s:c:d,g=o>l?o<f?o:f:l;g=g>0?g>e.width-r?e.height-r:g:0,n.moveView.css({left:v,top:g,display:"block"});var p=(v-(e.width-h)/2)*m,_=(g-(e.height-u)/2)*m;n.view.css({display:"block"}).find("img").css({"margin-left":-p,"margin-top":-_})},n.container.on("mousemove",function(t){n.moveFn(t)}).on("mouseleave",function(){n.moveView.hide(),n.view.hide()});var g=n.thumbnail.find(">*"),p=g.length;n.imgMove=function(t){t?e.index++:e.index--;var i=Math.ceil(e.width/g.width()/2);if(p<i)return!1;e.index<0?e.index=0:e.index>p-i?e.index=p-i:e.index;var s=g.width()*e.index-g.width();n.thumbnail.css({left:(s>0?-s:0)+"px"})},n.assembly.find(">*").on("click",function(){n.imgMove(t(this).index())}),g.on("click",function(){e.index=t(this).index(),n.eqImg(),n.imgMove(e.index)}),n.setIndex=function(t){e.index=t||0},t.myimgzoomobj=n}}(t)}).call(this,e(97))},293:function(t,i,e){"use strict";var s=e(242);e.n(s).a},301:function(t,i,e){"use strict";var s=function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("div",{ref:"point",class:this.classes,style:this.styles},[this._t("default")],2),this._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:this.slot,expression:"slot"}],style:this.slotStyle})])},o=[];s._withStripped=!0,e.d(i,"a",function(){return s}),e.d(i,"b",function(){return o})},302:function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[t._m(0),t._v(" "),e("div",{staticClass:"section"},[e("div",{staticClass:"wrapper clearfix"},[e("div",{staticClass:"wrap-box"},[t.goods.goodsinfo?e("div",{staticClass:"left-925"},[e("div",{staticClass:"goods-box clearfix"},[e("div",{staticClass:"pic-box"},[e("div",{staticClass:"magnifier",attrs:{id:"magnifier1"}},[t._m(1),t._v(" "),e("div",{staticClass:"magnifier-assembly"},[t._m(2),t._v(" "),e("div",{staticClass:"magnifier-line"},[e("ul",{staticClass:"clearfix animation03"},t._l(t.goods.imglist,function(t){return e("li",{key:t.id},[e("div",{staticClass:"small-img"},[e("img",{attrs:{src:t.thumb_path}})])])}))])]),t._v(" "),e("div",{staticClass:"magnifier-view"})])]),t._v(" "),e("div",{staticClass:"goods-spec"},[e("h1",[t._v(t._s(t.goods.goodsinfo.title))]),t._v(" "),e("p",{staticClass:"subtitle"},[t._v(t._s(t.goods.goodsinfo.sub_title))]),t._v(" "),e("div",{staticClass:"spec-box"},[e("dl",[e("dt",[t._v("货号")]),t._v(" "),e("dd",{attrs:{id:"commodityGoodsNo"}},[t._v(t._s(t.goods.goodsinfo.goods_no))])]),t._v(" "),e("dl",[e("dt",[t._v("市场价")]),t._v(" "),e("dd",[e("s",{attrs:{id:"commodityMarketPrice"}},[t._v("¥"+t._s(t.goods.goodsinfo.market_price))])])]),t._v(" "),e("dl",[e("dt",[t._v("销售价")]),t._v(" "),e("dd",[e("em",{staticClass:"price",attrs:{id:"commoditySellPrice"}},[t._v("¥"+t._s(t.goods.goodsinfo.sell_price))])])])]),t._v(" "),e("div",{staticClass:"spec-box"},[e("dl",[e("dt",[t._v("购买数量")]),t._v(" "),e("dd",[e("div",{staticClass:"stock-box"},[e("el-input-number",{attrs:{min:1,max:t.goods.goodsinfo.stock_quantity,size:"small"},model:{value:t.count,callback:function(i){t.count=i},expression:"count"}})],1),t._v(" "),e("span",{staticClass:"stock-txt"},[t._v("\n                                            库存\n                                            "),e("em",{attrs:{id:"commodityStockNum"}},[t._v(t._s(t.goods.goodsinfo.stock_quantity))]),t._v("件\n                                        ")])])]),t._v(" "),e("dl",[e("dd",[e("div",{staticClass:"btn-buy",attrs:{id:"buyButton"}},[e("button",{staticClass:"buy"},[t._v("立即购买")]),t._v(" "),e("button",{ref:"addToShopCartRef",staticClass:"add",on:{click:t.addToShopCart}},[t._v("加入购物车")])])])])])])]),t._v(" "),e("div",{staticClass:"goods-tab bg-wrap",attrs:{id:"goodsTabs"}},[e("Affix",[e("div",{staticClass:"tab-head",staticStyle:{position:"static",top:"517px",width:"925px"},attrs:{id:"tabHead"}},[e("ul",[e("li",[e("a",{class:{selected:t.isShowIntroduction},attrs:{href:"javascript:;"},on:{click:function(i){t.isShowIntroduction=!0}}},[t._v("商品介绍")])]),t._v(" "),e("li",[e("a",{class:{selected:!t.isShowIntroduction},attrs:{href:"javascript:;"},on:{click:function(i){t.isShowIntroduction=!1}}},[t._v("商品评论")])])])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowIntroduction,expression:"isShowIntroduction"}],staticClass:"tab-content entry",staticStyle:{display:"block"}},[e("div",{staticStyle:{padding:"5px"},domProps:{innerHTML:t._s(t.goods.goodsinfo.content)}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowIntroduction,expression:"!isShowIntroduction"}],staticClass:"tab-content",staticStyle:{display:"block"}},[e("div",{staticClass:"comment-box"},[e("div",{staticClass:"form-box",attrs:{id:"commentForm",name:"commentForm"}},[t._m(3),t._v(" "),e("div",{staticClass:"conn-box"},[e("div",{staticClass:"editor"},[e("textarea",{ref:"textAreaRef",attrs:{id:"txtContent",name:"txtContent",sucmsg:" ",datatype:"*10-1000",nullmsg:"请填写评论内容！"}}),t._v(" "),e("span",{staticClass:"Validform_checktip"})]),t._v(" "),e("div",{staticClass:"subcon"},[e("input",{staticClass:"submit",attrs:{id:"btnSubmit",name:"submit",type:"submit",value:"提交评论"},on:{click:t.postComment}}),t._v(" "),e("span",{staticClass:"Validform_checktip"})])])]),t._v(" "),e("ul",{staticClass:"list-box",attrs:{id:"commentList"}},[0===t.commentInfo.totalcount?e("p",{staticStyle:{margin:"5px 0px 15px 69px","line-height":"42px","text-align":"center",border:"1px solid rgb(247, 247, 247)"}},[t._v("暂无评论，快来抢沙发吧！")]):t._e(),t._v(" "),t._l(t.commentInfo.message,function(i){return e("li",{key:i.id},[t._m(4,!0),t._v(" "),e("div",{staticClass:"inner-box"},[e("div",{staticClass:"info"},[e("span",[t._v(t._s(i.user_name))]),t._v(" "),e("span",[t._v(t._s(t._f("dateFmt")(i.add_time,"YYYY-MM-DD HH:mm:ss")))])]),t._v(" "),e("p",[t._v(t._s(i.content))])])])})],2),t._v(" "),e("div",{staticClass:"page-box",staticStyle:{margin:"5px 0px 0px 62px"}},[e("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[2,5,10,20],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.commentInfo.totalcount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])],1)]):t._e(),t._v(" "),e("div",{staticClass:"left-220"},[e("div",{staticClass:"bg-wrap nobg"},[e("div",{staticClass:"sidebar-box"},[e("h4",[t._v("推荐商品")]),t._v(" "),e("ul",{staticClass:"side-img-list"},t._l(t.goods.hotgoodslist,function(i){return e("li",{key:i.id},[e("div",{staticClass:"img-box"},[e("router-link",{attrs:{to:"/goodsinfo/"+i.id}},[e("img",{attrs:{src:i.img_url}})])],1),t._v(" "),e("div",{staticClass:"txt-box"},[e("router-link",{attrs:{to:"/goodsinfo/"+i.id}},[t._v(t._s(i.title))]),t._v(" "),e("span",[t._v(t._s(t._f("dateFmt")(i.add_time)))])],1)])}))])])])])])]),t._v(" "),e("transition",{on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},[t.goods.imglist?e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],ref:"animateRef",staticClass:"animateDiv"},[e("img",{attrs:{src:t.goods.imglist[0].thumb_path,alt:""}})]):t._e()])],1)},o=[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"section"},[i("div",{staticClass:"location"},[i("span",[this._v("当前位置：")]),this._v(" "),i("a",{attrs:{href:"/index.html"}},[this._v("首页")]),this._v(" >\n            "),i("a",{attrs:{href:"/goods.html"}},[this._v("购物商城")]),this._v(" >\n            "),i("a",{attrs:{href:"/goods/42/1.html"}},[this._v("商品详情")])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"magnifier-container"},[i("div",{staticClass:"images-cover"}),this._v(" "),i("div",{staticClass:"move-view"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"magnifier-btn"},[i("span",{staticClass:"magnifier-btn-left"},[this._v("<")]),this._v(" "),i("span",{staticClass:"magnifier-btn-right"},[this._v(">")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"avatar-box"},[i("i",{staticClass:"iconfont icon-user-full"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"avatar-box"},[i("i",{staticClass:"iconfont icon-user-full"})])}];s._withStripped=!0,e.d(i,"a",function(){return s}),e.d(i,"b",function(){return o})}}]);